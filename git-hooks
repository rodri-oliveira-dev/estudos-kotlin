import io.micronaut.http.annotation.Get
import io.micronaut.http.client.annotation.Client

@Client("my-http-client")
interface MyHttpClient {

    @Get("/some/endpoint")
    fun getSomeData(): String

}



micronaut:
  http:
    services:
      my-http-client:
        url: https://example.com
        read-timeout: 5s




#!/bin/bash

# listar as tasks em execução que correspondem ao filtro de imagem
task_arn=$(aws ecs list-tasks --cluster fargate1 --desired-status RUNNING --query "taskArns[?contains(containers[?image==\`*vendortoken*\`].image, \`vendortoken\`)]" --output text | awk 'NR==1{print $1}')

if [ -z "$task_arn" ]; then
  echo "Nenhuma tarefa encontrada."
  exit 1
fi

# obter o ID da task a partir da ARN
task_id=$(echo $task_arn | cut -d/ -f2)

# obter o nome do primeiro contêiner que corresponde ao filtro de imagem
container_name=$(aws ecs describe-tasks --cluster fargate1 --tasks $task_arn --query 'tasks[].containers[?contains(image, `vendortoken`) == `true`].name' --output text)

if [ -z "$container_name" ]; then
  echo "Nenhum contêiner encontrado."
  exit 1
fi

# conectar ao contêiner usando o comando execute-command
aws ecs execute-command --cluster fargate1 --task $task_id --container $container_name --interactive --command "/bin/sh"




@echo off

REM listar as tasks em execução que correspondem ao filtro de imagem
set task_arn=
for /f "tokens=1" %%i in ('aws ecs list-tasks --cluster fargate1 --desired-status RUNNING --query "taskArns[?contains(containers[?image==`*vendortoken*`].image, `vendortoken`)]" --output text ^| awk "NR==1{print $1}"') do set task_arn=%%i

if not defined task_arn (
  echo Nenhuma tarefa encontrada.
  exit /b 1
)

REM obter o ID da task a partir da ARN
for /f "tokens=2 delims=/" %%i in ("%task_arn%") do set task_id=%%i

REM obter o nome do primeiro contêiner que corresponde ao filtro de imagem
set container_name=
for /f "tokens=1" %%i in ('aws ecs describe-tasks --cluster fargate1 --tasks %task_arn% --query "tasks[].containers[?contains(image, ^"vendortoken^") == ^"true^"].name" --output text') do set container_name=%%i

if not defined container_name (
  echo Nenhum contêiner encontrado.
  exit /b 1
)

REM conectar ao contêiner usando o comando execute-command
aws ecs execute-command --cluster fargate1 --task %task_id% --container %container_name% --interactive --command "/bin/sh"
